---
layout: post
date: 2015-01-04 13:20:00
title: Tuning (part 2 adding categories and tags)
category: blogging
tags: 
    - jekyll
    - categories
    - tags
    - frontmatter
    - github-pages
---
I have always been one to flit from subject to subject - both inside and outside a work environment, life is generally like that. Given that a blog (with a little cheating here and there) is generally written chronologically, I feel the need to be able to identify themes and topics so that all the stuff on a single subject can be gathered together for a comprehensive read (if only by me).

### Categories and tags
Whilst I have often come across Categories and Tags in previous blogging, I have not been entirely clear what they are.  A quick trip to Google found this on [WordPress](http://en.support.wordpress.com/posts/categories-vs-tags/)

<img src='http://en.support.files.wordpress.com/2010/10/categories-versus-tags.png?w=460&h=189' />

Although that is not a rigourous definition, it is good enough for me and one thta I will bear in mind.

### Adding categories and tags to Jekyll
The Jekyll starting point that I chose does not have categories or tags so a bit of research was needed.  The relevant documentation seemed to me to vary between non-existant and opaque, so I opted to look at some [Jekyll blogs on GitHub](https://github.com/jekyll/jekyll/wiki/sites).   Two things suprised me:

- how many blogs there were
- how few of them used categories or tags

I eventually found a few sites that used them and this led me to four points of investigation

- how do you specify categories and tags in a post?
- how (if at all) do you display the categories and tags attached to a post?
- how do you display category and tag based lists of posts?
- how do you direct visitors to the category and tag based lists of posts?

### Specifying tags and categories in a post
This is the easy one.  Put entries in the [Front Matter](http://jekyllrb.com/docs/frontmatter/) like this:
    
    category: blogging
    tags: [jekyll,categories,tags,frontmatter,github-pages]
    
The second of these can also be entered in this format with the same results:

    tags: 
    - jekyll
    - categories
    - tags
    - frontmatter
    - github-pages

### Displaying the categories and tags attached to a post
This is much more complex and defeated me for several hours until I came across [this post from Stephan Gro√ü](http://www.minddust.com/post/tags-and-categories-on-github-pages/)

Even then it took me several goes to get it right.  Here is what I did

1. I replaced the content of _layouts/my post.html with this (derived largely from Stephan's site 
 
<div class="falseCode">&#x002d;--</div>

    layout: default
    
<div class="falseCode">&#x002d;--</div>

<div class="falseCode"><pre>&#x007b;% assign post = page %&#x007d;</pre></div>

    <article>
        <header id="post-header">
        
<div class="falseCode"><pre>        &lt;h1 id="post-title"&gt;&#x007b;&#x007b; post.title &#x007d;&#x007d;&lt;/h1&gt;</pre></div>
<div class="falseCode"><pre>        &lt;h4 id="post-subtitle"&gt;&lt;time datetime="&#x007b;&#x007b; post.date | date_to_xmlschema &#x007d;&#x007d;"&gt;&lt;/time&gt;&lt;/h4&gt; </pre></div>   

        </header>
        <div id="post-content">

<div class="falseCode"><pre>        &#x007b;&#x007b; content &#x007d;&#x007d;</pre></div>
<div class="falseCode"><pre>        &#x007b;% if post.category %&#x007d;</pre></div>
<div class="falseCode"><pre>            &#x007b;% for site_category in site.data.categories %&#x007d;</pre></div>
<div class="falseCode"><pre>                &#x007b;% if site_category.slug == post.category %&#x007d;</pre></div>
<div class="falseCode"><pre>                    &#x007b;% assign category = site_category %&#x007d;</pre></div>
<div class="falseCode"><pre>                &#x007b;% endif %&#x007d;</pre></div>
<div class="falseCode"><pre>            &#x007b;% endfor %&#x007d;</pre></div>
<div class="falseCode"><pre>            &#x007b;% if category %&#x007d;</pre></div>
<div class="falseCode"><pre>                &#x007b;% capture category_content %&#x007d; in &lt;span class="label" style="background-color:&#x007b;&#x007b; category.color &#x007d;&#x007d;"&gt;&lt;a href="/blog/category/&#x007b;&#x007b; category.slug &#x007d;&#x007d;/"&gt;&#x007b;&#x007b; category.name &#x007d;&#x007d;&lt;/a&gt;&lt;/span&gt;&#x007b;% endcapture %&#x007d;</pre></div>
<div class="falseCode"><pre>            &#x007b;% endif %&#x007d;</pre></div>
<div class="falseCode"><pre>        &#x007b;% else %&#x007d;</pre></div>
<div class="falseCode"><pre>            &#x007b;% assign category_content = '' %&#x007d;</pre></div>
<div class="falseCode"><pre>        &#x007b;% endif %&#x007d;</pre></div>
<div class="falseCode"><pre>        &#x007b;% if post.tags.size > 0 %&#x007d;</pre></div>
<div class="falseCode"><pre>            &#x007b;% capture tags_content %&#x007d; with &#x007b;% if post.tags.size == 1 %&#x007d;<i class="fa fa-tag"></i>&#x007b;% else %&#x007d;&lt;i class="fa fa-tags"&gt;&lt;/i&gt;&#x007b;% endif %&#x007d;: &#x007b;% endcapture %&#x007d;</pre></div>
<div class="falseCode"><pre>            &#x007b;% for post_tag in post.tags %&#x007d;</pre></div>
<div class="falseCode"><pre>                &#x007b;% for data_tag in site.data.tags %&#x007d;</pre></div>
<div class="falseCode"><pre>                    &#x007b;% if data_tag.slug == post_tag %&#x007d;</pre></div>
<div class="falseCode"><pre>                        &#x007b;% assign tag = data_tag %&#x007d;</pre></div>
<div class="falseCode"><pre>                    &#x007b;% endif %&#x007d;</pre></div>
<div class="falseCode"><pre>                &#x007b;% endfor %&#x007d;</pre></div>
<div class="falseCode"><pre>                &#x007b;% if tag %&#x007d;</pre></div>
<div class="falseCode"><pre>                   &#x007b;% capture tags_content_temp %&#x007d;&#x007b;&#x007b; tags_content &#x007b;&#x007b;&lt;a href="/blog/tag/&#x007b;&#x007b; tag.slug }}/"&gt;&#x007b;&#x007b; tag.name &#x007d;&#x007d;&lt;/a&gt;&#x007b;% if forloop.last == false %&#x007d;, &#x007b;% endif %&#x007d;&#x007b;% endcapture %&#x007d;</pre></div>
<div class="falseCode"><pre>                    &#x007b;% assign tags_content = tags_content_temp %&#x007d;</pre></div>
<div class="falseCode"><pre>                &#x007b;% endif %&#x007d;</pre></div>
<div class="falseCode"><pre>            &#x007b;% endfor %&#x007d;</pre></div>
<div class="falseCode"><pre>        &#x007b;% else %&#x007d;</pre></div>
<div class="falseCode"><pre>            &#x007b;% assign tags_content = '' %&#x007d;</pre></div>
<div class="falseCode"><pre>        &#x007b;% endif %&#x007d;</pre></div>
<div class="falseCode"><pre>        &lt;p id="post-meta"&gt;Posted &#x007b;&#x007b; category_content &#x007d;&#x007d;&#x007b;&#x007b; tags_content &#x007d;&#x007d;&lt;/p&gt;</pre></div>
<div class="falseCode"><pre>        &lt;div class="date"&gt;</pre></div>
<div class="falseCode"><pre>            Written on &#x007b;&#x007b; page.date | date: "%B %e, %Y at %R" &#x007d;&#x007d;</pre></div>
<div class="falseCode"><pre>        &lt;/div&gt;</pre></div>
<div class="falseCode"><pre>    &lt;/div&gt;</pre></div>
<div class="falseCode"><pre>&lt;/article&gt;</pre></div>


The Ending still working
    {% raw %}
    {% content %}
    {% endraw%}
